{% extends 'base.html' %}

{% block content %}
  {% from 'args-table.html' import args_table with context %}
  {% from 'content-grid.html' import content_grid %}
  {{ accordion_section(
    'Arguments',
    args_table(),
  )}}

  <h2>Outputs</h2>
  {{ accordion_section(
    'Coastal Exposure and Habitat Protection',
    content_grid([
      ('<div id="exposure_map"></div>', 50),
      ('<div id="habitat_map"></div>', 50),
      ('<div id="exposure_histogram"></div>', 50),
      ('<div>' + habitat_params_table + '<p>' + habitat_table_description + '</p></div>', 50)
    ])
  ) }}

  {{ accordion_section(
    'Ranked exposure variables',
    '<div id="rank_vars_figure"></div>'|safe
  ) }}

  {{ accordion_section(
    'Pre-ranked variables',
    '<div id="intermediate_vars_histograms"></div>'|safe
  ) }}

  {{ accordion_section(
    'Wave Exposure',
    '<div id="wave_energy_map"></div>'|safe
  ) }}

{% endblock content %}

{% from 'vegalite-plot.html' import embed_vega %}
{% block scripts %}
  {{ super() }}
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.20.1"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
  {% include 'vega-embed-js.html' %}
  {% set chart_spec_id_list = [
    (exposure_map_json, 'exposure_map'),
    (habitat_map_json, 'habitat_map'),
    (exposure_histogram_json, 'exposure_histogram')
  ] %}
  {{ embed_vega(chart_spec_id_list) }}
  {{ embed_vega([
    (rank_vars_figure_json, 'rank_vars_figure')
  ]) }}
  {{ embed_vega([
    (facetted_histograms_json, 'intermediate_vars_histograms')
  ]) }}
  {{ embed_vega([(wave_energy_map_json, 'wave_energy_map')]) }}
{% endblock scripts %}