<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.20.1"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
  {% include 'vega-embed-js.html' %}
  <title>{{ page_title }}</title>
  {% include 'styles.html' %}
</head>
<body>
  <div class="report-container">
    {% set accordion_panel_num = 1 %}

    <h1>{{ page_title }}</h1>
    <p>This report summarizes the results of running the {{ model_name }} model.</p>
    <p>It was generated at {{ timestamp }}.</p>

    <h2>Inputs</h2>

    {% set accordion_panel_id = ['accordion-panel-', accordion_panel_num]|join %}
    {% set accordion_panel_num = accordion_panel_num + 1 %}
    {% include 'args-table-section.html' %}
    
    <h2>Outputs</h2>

    <details class="accordion-section">
      <summary class="accordion-header accordion-button">
        <h3>Coastal Exposure and Habitat Protection</h3>
      </summary>
      <div id="exposure_map"></div>
      <div id="habitat_map"></div>
      <div id="exposure_histogram"></div>
      <div>
        {{ habitat_params_table|safe }}
        <p>{{ habitat_table_description }}</p>
      </div>
    </details>
    {% set chart_spec_id_list = [
      (exposure_map_json, 'exposure_map'),
      (habitat_map_json, 'habitat_map'),
      (exposure_histogram_json, 'exposure_histogram')
    ] %}
    {% include 'vegalite-plot-section.html' %}
    <!-- {% set chart_id_list = ['exposure_map', 'habitat_map', 'exposure_histogram'] %}
    {% set section_child_id_list = chart_id_list + ['habitat_description'] %}
    {% set section_heading = 'Coastal Exposure and Habitat Protection' %}
    {% set accordion_panel_id = ['accordion-panel-', accordion_panel_num]|join %}
    {% set accordion_panel_num = accordion_panel_num + 1 %}
    {% include 'section.html' %} -->
    <details class="accordion-section">
      <summary class="accordion-header accordion-button">
        <h3>Ranked exposure variables</h3>
      </summary>
      <div id="rank_vars_figure"></div>
    </details>
    {% set chart_spec_id_list = [
      (rank_vars_figure_json, 'rank_vars_figure')
    ] %}
    {% include 'vegalite-plot-section.html' %}

    <details class="accordion-section">
      <summary class="accordion-header accordion-button">
        <h3>Pre-ranked variables</h3>
      </summary>
      <div id="intermediate_vars_histograms"></div>
    </details>
    {% set chart_spec_id_list = [
      (facetted_histograms_json, 'intermediate_vars_histograms')
    ] %}
    {% include 'vegalite-plot-section.html' %}

    {% set section_child_id_list = ['wave_energy_map'] %}
    {% set chart_spec_id_list = [(wave_energy_map_json, 'wave_energy_map')] %}
    {% set section_heading = 'Wave Exposure' %}
    {% set accordion_panel_id = ['accordion-panel-', accordion_panel_num]|join %}
    {% set accordion_panel_num = accordion_panel_num + 1 %}
    {% include 'section.html' %}
    {% include 'vegalite-plot-section.html' %}

  </div>
  {% include 'accordion-js.html' %}
</body>
</html>